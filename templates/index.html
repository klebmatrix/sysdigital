<!DOCTYPE html>
<html lang="pt-br" ng-app="NeuroApp">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuroWorkspace - Game Board v21</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <style>
        :root {
            --primary: #2563eb; --bg: #020617; --surface: #1e293b;
            --text: #f8fafc; --border: #334155; --success: #10b981; 
            --accent: #38bdf8; --error: #ef4444; --gold: #fbbf24; --warning: #f59e0b;
        }

        body { margin: 0; font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); display: flex; height: 100vh; overflow: hidden; }

        /* Navega√ß√£o */
        .sidebar { width: 80px; background: #000; display: flex; flex-direction: column; align-items: center; padding: 20px 0; border-right: 1px solid var(--border); flex-shrink: 0; }
        .nav-dot { width: 50px; height: 50px; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 15px; cursor: pointer; transition: 0.3s; color: #64748b; font-size: 1.2rem; border: none; background: none; }
        .nav-dot.active { background: var(--primary); color: white; box-shadow: 0 0 15px rgba(37, 99, 235, 0.5); }

        /* Painel do Dado */
        .side-panel { width: 340px; background: var(--surface); border-right: 2px solid var(--border); display: flex; flex-direction: column; align-items: center; padding: 30px; }
        
        .dice-3d {
            width: 150px; height: 150px; background: linear-gradient(145deg, #ffffff, #cbd5e1);
            border-radius: 30px; display: flex; align-items: center; justify-content: center;
            font-size: 6rem; color: #0f172a; font-weight: 900; cursor: pointer;
            box-shadow: 0 12px 0 #64748b, 0 20px 30px rgba(0,0,0,0.5);
            transition: 0.1s; margin: 30px 0; border: 4px solid #fff;
        }
        .dice-3d.rolling { animation: shake 0.1s infinite; }
        .dice-3d.berlinda { border-color: var(--warning); box-shadow: 0 12px 0 #b45309, 0 0 30px var(--warning); animation: pulse 1s infinite; }
        .dice-3d.eliminated { background: #450a0a; color: var(--error); border-color: var(--error); box-shadow: 0 12px 0 #2b0606; }
        
        @keyframes shake { 0% { transform: rotate(5deg); } 50% { transform: rotate(-5deg); } 100% { transform: rotate(5deg); } }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        .rules-table { width: 100%; background: rgba(0,0,0,0.3); border-radius: 15px; padding: 15px; font-size: 0.9rem; border: 1px solid var(--border); }
        .rules-table div { display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .rules-table b { color: var(--accent); }

        /* √Årea de Conte√∫do */
        .main-content { flex-grow: 1; padding: 40px; overflow-y: auto; background: radial-gradient(circle at top right, #1e293b, #020617); }
        .tab-content { display: none; max-width: 1000px; margin: 0 auto; }
        .tab-content.active { display: block; animation: fadeIn 0.4s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .card { background: rgba(30, 41, 59, 0.5); backdrop-filter: blur(10px); border: 1px solid var(--border); border-radius: 24px; padding: 30px; }
        .frac-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 15px; }
        .frac-box { background: #334155; padding: 15px; border-radius: 15px; text-align: center; border: 1px solid var(--border); }
        .slice { fill: #0f172a; stroke: #475569; cursor: pointer; transition: 0.2s; }
        .slice.selected { fill: var(--accent); stroke: #fff; }

        .btn-action { background: var(--primary); color: white; border: none; padding: 15px 25px; border-radius: 12px; font-weight: bold; cursor: pointer; width: auto; font-size: 1rem; }
    </style>
</head>
<body ng-controller="MainCtrl">

    <nav class="sidebar">
        <button class="nav-dot active" onclick="switchTab('tab-frac', this)"><i class="fa-solid fa-pizza-slice"></i></button>
        <button class="nav-dot" onclick="switchTab('tab-naval', this)"><i class="fa-solid fa-ship"></i></button>
        <button class="nav-dot" onclick="switchTab('tab-ang', this)"><i class="fa-solid fa-compass"></i></button>
    </nav>

    <aside class="side-panel">
        <h2 style="margin:0; color:var(--accent); letter-spacing:1px">DADO 3D</h2>
        <div id="dice" class="dice-3d" onclick="rollDice()">1</div>
        <div id="status-msg" style="text-align:center; font-weight:bold; color:var(--gold); min-height:4em; margin-bottom:20px; font-size: 1.1rem;">Clique no dado!</div>

        <div class="rules-table">
            <div><span>üé≤ <b>6</b></span> <span style="color:var(--success)">+100 pts + Joga Denovo</span></div>
            <div><span>üé≤ <b>5</b></span> <span>+70 pts + Passa</span></div>
            <div><span>üé≤ <b>4</b></span> <span>+50 pts + Fra√ß√£o</span></div>
            <div><span>üé≤ <b>3</b></span> <span>+30 pts + Fra√ß√£o</span></div>
            <div><span>üé≤ <b>2</b></span> <span>+5 pts + Fra√ß√£o</span></div>
            <div><span>üé≤ <b>1</b></span> <span style="color:var(--warning)">BERLINDA (Gira denovo)</span></div>
            <div style="border:none; color:var(--error); margin-top:10px"><span>‚ö†Ô∏è <b>Duas vezes o 1</b></span> <b>ELIMINADO</b></div>
        </div>
        <p style="margin-top: auto; opacity: 0.5; font-size: 0.8rem;">Cada jogador anota seus pontos.</p>
    </aside>

    <main class="main-content">
        <div id="tab-frac" class="tab-content active">
            <div class="card">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:25px">
                    <h2>Fra√ß√µes Embaralhadas (12)</h2>
                    <button class="btn-action" onclick="initFrac()">Embaralhar Pe√ßas</button>
                </div>
                <div id="frac-grid" class="frac-grid"></div>
            </div>
        </div>

        <div id="tab-naval" class="tab-content"><div class="card"><h2>Batalha Naval</h2><div id="grid-naval" style="display:grid; grid-template-columns:repeat(5, 60px); gap:10px; justify-content:center; margin-top:20px"></div></div></div>
        <div id="tab-ang" class="tab-content"><div class="card" style="text-align:center"><h2>√Çngulos</h2><div id="ang-svg" style="margin:40px 0"></div><div id="ang-opts" style="display:grid; grid-template-columns:1fr 1fr; gap:15px; max-width:400px; margin:0 auto"></div></div></div>
    </main>

<script>
    let inBerlinda = false;
    let isEliminated = false;

    function rollDice() {
        if(isEliminated) { if(confirm("Deseja reiniciar seu turno?")) location.reload(); return; }
        const d = document.getElementById('dice'), msg = document.getElementById('status-msg');
        if(d.classList.contains('rolling')) return;
        
        d.classList.add('rolling');
        msg.innerText = "Sorteando...";
        let count = 0;
        const interval = setInterval(() => {
            d.innerText = Math.floor(Math.random()*6)+1;
            if(count++ > 15) {
                clearInterval(interval);
                d.classList.remove('rolling');
                const val = Math.floor(Math.random()*6)+1;
                d.innerText = val;
                processDice(val);
            }
        }, 60);
    }

    function processDice(val) {
        const msg = document.getElementById('status-msg'), d = document.getElementById('dice');
        d.classList.remove('berlinda');

        // L√≥gica de Elimina√ß√£o por 1 repetido
        if(inBerlinda && val === 1) {
            isEliminated = true; inBerlinda = false;
            msg.innerHTML = "üö® <span style='color:var(--error); font-size:1.4rem'>VOC√ä FOI ELIMINADO!</span>";
            d.innerHTML = "‚ùå"; d.classList.add('eliminated');
            confetti({ colors: ['#ff0000', '#000000'], particleCount: 200 }); return;
        }

        if(inBerlinda && val !== 1) {
            inBerlinda = false;
            msg.innerHTML = "<span style='color:var(--success)'>UFA! SAIU DA BERLINDA.</span><br>";
        }

        // L√≥gica da Berlinda
        if(val === 1) {
            inBerlinda = true; d.classList.add('berlinda');
            msg.innerHTML = "üî• <span style='color:var(--warning)'>BERLINDA!</span><br>Gire denovo imediatamente. Se sair 1, voc√™ sai do jogo!";
            return;
        }

        // Pontua√ß√£o e Regras
        const scores = {
            6: "üèÜ +100 PTS! JOGA DE NOVO.",
            5: "‚ú® +70 PTS! PASSA A VEZ.",
            4: "üìà +50 PTS! RESOLVA FRA√á√ÉO.",
            3: "üëç +30 PTS! RESOLVA FRA√á√ÉO.",
            2: "‚úèÔ∏è +5 PTS! RESOLVA FRA√á√ÉO."
        };
        msg.innerHTML += scores[val];
        if(val === 6) confetti();
    }

    function switchTab(id, el) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.nav-dot').forEach(n => n.classList.remove('active'));
        document.getElementById(id).classList.add('active'); el.classList.add('active');
    }

    function initFrac() {
        const grid = document.getElementById('frac-grid'); grid.innerHTML = '';
        const lista = [
            {n:1,d:2},{n:2,d:3},{n:3,d:4},{n:1,d:3},{n:1,d:4},{n:2,d:5},
            {n:3,d:5},{n:5,d:6},{n:1,d:6},{n:4,d:8},{n:5,d:8},{n:2,d:4}
        ].sort(()=>Math.random()-0.5);
        lista.forEach(des => {
            const card = document.createElement('div'); card.className = 'frac-box';
            card.innerHTML = `<h3 style="margin:0 0 10px 0; color:var(--accent)">${des.n}/${des.d}</h3>`;
            const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            svg.setAttribute("viewBox", "0 0 100 100"); svg.setAttribute("width", "85");
            const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
            for(let j=0; j<des.d; j++) {
                const p = document.createElementNS("http://www.w3.org/2000/svg", "path");
                p.setAttribute("d", drawSlice(50, 50, 42, (j*360)/des.d, ((j+1)*360)/des.d));
                p.className.baseVal = "slice"; p.onclick = () => p.classList.toggle('selected');
                g.appendChild(p);
            }
            svg.appendChild(g); card.appendChild(svg); grid.appendChild(card);
        });
    }

    function drawSlice(x,y,r,s,e){
        const rad = (a) => (a-90)*Math.PI/180;
        return `M ${x} ${y} L ${x+r*Math.cos(rad(s))} ${y+r*Math.sin(rad(s))} A ${r} ${r} 0 ${e-s>180?1:0} 1 ${x+r*Math.cos(rad(e))} ${y+r*Math.sin(rad(e))} Z`;
    }

    angular.module('NeuroApp', []).controller('MainCtrl', function($scope) {});
    window.onload = () => initFrac();
</script>
</body>
</html>