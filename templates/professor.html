<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard do Professor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f4f7f9; }
        .card { background-color: white; padding: 1.5rem; border-radius: 0.75rem; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); }
        .action-button { transition: background-color 0.2s, transform 0.1s; }
        .item-list-container {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 1rem;
        }
        #feedback-message {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 1000;
        }
        .hidden-fields { display: none; }
        .dashboard-content { opacity: 0; transition: opacity 0.5s; }
        .loaded .dashboard-content { opacity: 1; }
    </style>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, query, where, onSnapshot, doc, deleteDoc, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Variáveis globais obrigatórias (Firebase)
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
        
        let app, db, auth;
        let userId = null;
        let isAuthReady = false;
        
        // Ativa o log para debug no console (útil para desenvolvimento)
        setLogLevel('debug'); 

        try {
            app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            auth = getAuth(app);
        } catch (e) {
            console.error("Erro ao inicializar Firebase. Verifique a configuração.", e);
        }

	        // Estado da Aplicação
	        let activities = [];
	        let currentItems = []; // Array unificado para todas as questões
	        
	        // Simulação de dados de submissão para demonstração (Para o caso de atividades criadas localmente)
	        const MOCK_SUBMISSIONS = {
	            'aluno_prof1@escola.com': { status: 'pendente', resposta: 'A resposta para a questão aberta é a letra A e a afirmação é Certa.' },
	            'aluno_prof2@escola.com': { status: 'corrigido', resposta: 'A resposta para a questão aberta é a letra B e a afirmação é Errada.', nota: 8.5 }
	        };

        // Elementos DOM
        const listaItensContainer = document.getElementById('listaItensContainer');
        const atividadesList = document.getElementById('atividadesList');
        const feedbackMessage = document.getElementById('feedback-message');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const dashboardContainer = document.getElementById('dashboardContainer');

        // Inputs dinâmicos
        const questionTypeSelect = document.getElementById('questionType');
        const multipleChoiceFields = document.getElementById('multipleChoiceFields');
        const trueFalseFields = document.getElementById('trueFalseFields');
        const openResponseFields = document.getElementById('openResponseFields');
        
        const mcQuestionInput = document.getElementById('mcQuestionInput');
        const mcOptionA = document.getElementById('mcOptionA');
        const mcOptionB = document.getElementById('mcOptionB');
        const mcOptionC = document.getElementById('mcOptionC');
        const mcOptionD = document.getElementById('mcOptionD');
        const mcGabarito = document.getElementById('mcGabarito');

        const tfQuestionInput = document.getElementById('tfQuestionInput');
        const tfGabarito = document.getElementById('tfGabarito');

        const openQuestionInput = document.getElementById('openQuestionInput');
        const openWritingInstruction = document.getElementById('openWritingInstruction');


        // --- Funções de Utilidade ---

        function showFeedback(message, type = 'success') {
            feedbackMessage.textContent = message;
            feedbackMessage.className = `p-3 rounded-lg shadow-xl text-white ${type === 'success' ? 'bg-green-500' : 'bg-red-500'}`;
            feedbackMessage.style.display = 'block';
            setTimeout(() => { feedbackMessage.style.display = 'none'; }, 5000);
        }

        // --- Gerenciamento de Autenticação e Carregamento ---

        // Função para finalizar o estado de carregamento e exibir o dashboard
        function finishLoading() {
            if (loadingIndicator) loadingIndicator.classList.add("hidden");
            if (dashboardContainer) {
                 dashboardContainer.classList.add("loaded");
                 dashboardContainer.classList.remove("hidden");
            }
        }
        
        // Função de utilidade para fazer chamadas de API
        async function apiFetch(url, data = {}) {
            const response = await fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            });
            
            // Se for a rota de PDF, retorna a resposta bruta (Blob)
            if (url === '/api/gerar_pdf_atividade') {
                return response;
            }
            
            return response.json();
        }

        onAuthStateChanged(auth, async (user) => {
            if (user) {
                userId = user.uid;
                const userIdDisplay = document.getElementById('userIdDisplay');
                if (userIdDisplay) {
                    // Exibe o ID completo conforme a regra
                    userIdDisplay.textContent = `ID do Professor: ${userId}`; 
                }
            } else if (!initialAuthToken) {
                // Tenta login anônimo se não houver token
                try {
                    await signInAnonymously(auth);
                } catch (e) {
                     console.error("Erro ao tentar login anônimo:", e);
                }
            }
            isAuthReady = true;
            finishLoading();
            setupRealtimeListeners();
            
            // Simulação de carregamento de alunos (em um sistema real, faria uma chamada ao Firestore)
            // Para fins de demonstração, vamos simular que o professor tem 2 alunos
            alunosData = {
                'aluno_prof1@escola.com': {turma: '5A'},
                'aluno_prof2@escola.com': {turma: '5A'}
            };
            renderAlunosTable();
        });

        // Tenta autenticar com o token personalizado ou anônimo
        (async () => {
            try {
                if (initialAuthToken) {
                     await signInWithCustomToken(auth, initialAuthToken);
                } else if (!auth.currentUser) {
                     await signInAnonymously(auth); 
                }
            } catch (error) {
                console.error("Erro na autenticação inicial:", error);
                // Mesmo com erro, tenta finalizar o carregamento para não travar a UI
                finishLoading(); 
            }
        })();
        
        // --- Lógica Dinâmica do Formulário ---

        if (questionTypeSelect) {
            questionTypeSelect.addEventListener('change', () => {
                const type = questionTypeSelect.value;
                multipleChoiceFields.classList.add('hidden-fields');
                trueFalseFields.classList.add('hidden-fields');
                openResponseFields.classList.add('hidden-fields');
                
                if (type === 'multiple_choice') {
                    multipleChoiceFields.classList.remove('hidden-fields');
                } else if (type === 'true_false') {
                    trueFalseFields.classList.remove('hidden-fields');
                } else if (type === 'open_response') {
                    openResponseFields.classList.remove('hidden-fields');
                }
            });
            // Inicializa o estado do formulário
            questionTypeSelect.dispatchEvent(new Event('change'));
        }


        // --- Renderização de Itens na Lista ---

        function renderCurrentItems() {
            if (!listaItensContainer) return;

            listaItensContainer.innerHTML = '';

            if (currentItems.length === 0) {
                 listaItensContainer.innerHTML = '<p class="text-gray-400 text-center italic">Nenhuma questão adicionada.</p>';
                 return;
            }

            currentItems.forEach((item, index) => {
                const itemEl = document.createElement('div');
                let infoText = '';
                let typeColor = '';
                
                if (item.type === 'multiple_choice') {
                    typeColor = 'bg-blue-100 border-blue-500';
                    const gabaritoOption = item.options.find(opt => opt.value === item.gabarito);
                    infoText = `Múltipla Escolha | Gabarito: ${item.gabarito} (${gabaritoOption ? gabaritoOption.text.substring(0, 30) + '...' : 'Inválido'})`;
                } else if (item.type === 'true_false') {
                    typeColor = 'bg-gray-100 border-gray-500';
                    const gabaritoDisplay = item.gabarito || 'Sem Gabarito';
                    infoText = `Certo/Errado | Gabarito: ${gabaritoDisplay}`;
                } else if (item.type === 'open_response') {
                    typeColor = 'bg-yellow-100 border-yellow-500';
                    const instruction = item.writingInstruction === 'cursiva' ? 'Letra Cursiva' : item.writingInstruction === 'forma' ? 'Letra de Forma' : 'Sem Instrução';
                    infoText = `Problema Aberto | Escrita: ${instruction}`;
                }
                
                itemEl.className = `flex justify-between items-start p-3 mb-2 rounded-lg shadow-sm border-l-4 ${typeColor}`;
                itemEl.innerHTML = `
                    <div class="flex-1">
                        <p class="text-gray-800 font-bold text-md mb-1">${index + 1}. ${item.text.substring(0, 100)}...</p>
                        <span class="text-xs mt-1 inline-block text-gray-700">${infoText}</span>
                    </div>
                    <button data-index="${index}" class="remove-item text-red-500 hover:text-red-700 text-lg leading-none mt-1">&times;</button>
                `;
                listaItensContainer.appendChild(itemEl);
            });

            // Adiciona listener para remoção
            listaItensContainer.querySelectorAll('.remove-item').forEach(button => {
                button.onclick = function() {
                    const index = parseInt(this.dataset.index);
                    currentItems.splice(index, 1);
                    renderCurrentItems();
                };
            });
        }
        
        // --- Adicionar Questão ---

        const addItemBtn = document.getElementById('addItemBtn');
        if (addItemBtn) {
            addItemBtn.addEventListener('click', () => {
                const type = questionTypeSelect.value;
                let newItem = null;

                if (type === 'multiple_choice') {
                    const text = mcQuestionInput.value.trim();
                    const options = [
                        { value: 'A', text: mcOptionA.value.trim() },
                        { value: 'B', text: mcOptionB.value.trim() },
                        { value: 'C', text: mcOptionC.value.trim() },
                        { value: 'D', text: mcOptionD.value.trim() }
                    ];
                    const gabarito = mcGabarito.value;

                    if (!text || options.some(opt => !opt.text) || !gabarito) {
                        return showFeedback("Preencha o enunciado, todas as 4 opções e o gabarito para a Múltipla Escolha.", "error");
                    }
                    newItem = { type, text, options, gabarito };
                    
                    // Limpa campos MC
                    mcQuestionInput.value = mcOptionA.value = mcOptionB.value = mcOptionC.value = mcOptionD.value = '';
                    mcGabarito.value = 'A';


                } else if (type === 'true_false') {
                    const text = tfQuestionInput.value.trim();
                    const gabarito = tfGabarito.value;

                    if (!text) {
                        return showFeedback("Preencha o enunciado para a questão Certo/Errado.", "error");
                    }
                    newItem = { type, text, gabarito: gabarito || null };
                    
                    // Limpa campos C/E
                    tfQuestionInput.value = '';
                    tfGabarito.value = '';

                } else if (type === 'open_response') {
                    const text = openQuestionInput.value.trim();
                    const writingInstruction = openWritingInstruction.value;

                    if (!text) {
                        return showFeedback("Preencha o enunciado para o Problema Aberto.", "error");
                    }
                    newItem = { type, text, writingInstruction, requiredSpace: '8cm' };
                    
                    // Limpa campos Aberto
                    openQuestionInput.value = '';
                    openWritingInstruction.value = 'cursiva';
                }
                
                if (newItem) {
                    currentItems.push(newItem);
                    renderCurrentItems();
                }
            });
        }
        
        // --- Geração do PDF (LaTeX) ---
        
        function generateLatex() {
            if (currentItems.length === 0) {
                showFeedback("Adicione pelo menos uma questão para gerar o PDF.", "error");
                return null;
            }
            
            const professorIdDisplay = userId ? userId.substring(0, 8) + '...' : 'ID não disponível';
            
            // Definições LaTeX
            let latexContent = `
\\documentclass[12pt, a4paper]{article}
\\usepackage[a4paper, top=2.5cm, bottom=2.5cm, left=2cm, right=2cm]{geometry}
\\usepackage{fontspec}
\\usepackage[portuguese]{babel}
\\usepackage{amsmath}
\\usepackage{enumitem}
\\usepackage{amsfonts}

% Configuração de Fontes Noto (Para compilação robusta)
\\setmainfont{Noto Sans}
\\babelprovide[import]{portuguese}
\\babelprovide[import]{english}

% Pacotes customizados
\\usepackage{parskip} % Espaçamento entre parágrafos
\\usepackage{fancybox} % Para a caixa C/E
\\setlength{\\fboxsep}{8pt} % Espaço dentro da caixa

\\newcommand{\\caixace}{% Macro para Certo/Errado
    \\fbox{\\phantom{C}} (C) \\qquad \\fbox{\\phantom{E}} (E)
}

\\newcommand{\\espacoescrever}[1]{% Macro para linha de escrita
    \\vspace{0.5cm}
    {\\small \\textit{Instrução: Letra \\textbf{#1}}}
    \\vspace{0.1cm}
    \\hrule
    \\vspace{0.1cm}
    \\hrule
    \\vspace{8cm} % Espaço fixo de 8cm para escrita (pode ser ajustado)
}

\\begin{document}

\\title{Atividade de Avaliação - \\today}
\\author{Professor: \\texttt{${professorIdDisplay}}}
\\date{} % Remove a data padrao

\\maketitle

\\hrule
\\section*{Instruções Gerais}
Esta atividade contém ${currentItems.length} questões de tipos variados: Múltipla Escolha, Certo/Errado e Problemas de Resolução Aberta. Preencha seu nome e turma.
\\vspace{0.5cm}

\\textbf{Nome:} \\hrulefill
\\textbf{Turma:} \\hrulefill
\\vspace{0.5cm}
\\hrule
\\vspace{0.5cm}

\\section*{Questões}
\\begin{enumerate}[label=\\textbf{\\arabic*.}]
`;
            
            currentItems.forEach(item => {
                latexContent += `\n    \\item ${item.text}\n`;
                
                if (item.type === 'multiple_choice') {
                    // Múltipla Escolha
                    latexContent += `    \\begin{itemize}[label=\\quad, itemsep=0.5em]\n`;
                    item.options.forEach(opt => {
                        // Garantindo que a opção esteja presente no documento
                        if (opt.text) {
                            latexContent += `        \\item ( ) ${opt.value}) ${opt.text}\n`;
                        }
                    });
                    latexContent += `    \\end{itemize}\n`;

                } else if (item.type === 'true_false') {
                    // Certo/Errado
                    latexContent += `    \\vspace{0.3cm}\n`;
                    latexContent += `    \\caixace\n`;
                    latexContent += `    \\vspace{0.5cm}\n`;

                } else if (item.type === 'open_response') {
                    // Problema Aberto / Escrita
                    const instructionText = item.writingInstruction === 'cursiva' ? 'Cursiva' : 'de Forma';
                    // Cria uma área para a resposta escrita com a instrução de letra
                    latexContent += `    \\espacoescrever{${instructionText}}\n`;
                    latexContent += `    \\vspace{0.5cm}\n`;
                }
            });

            latexContent += `
\\end{enumerate}

\\newpage

% --- GABARITO (Pode ser removido se necessário, mas é útil para o professor) ---
\\section*{Gabarito (Para Uso do Professor)}
\\begin{enumerate}[label=\\textbf{\\arabic*.}]
`;
            
            currentItems.forEach(item => {
                let gabaritoInfo = '';
                if (item.type === 'multiple_choice') {
                    gabaritoInfo = `Múltipla Escolha. Resposta Correta: ${item.gabarito}`;
                } else if (item.type === 'true_false') {
                    gabaritoInfo = `Certo/Errado. Gabarito: ${item.gabarito || 'Sem Gabarito definido'}`;
                } else if (item.type === 'open_response') {
                    gabaritoInfo = `Problema Aberto. Instrução: Letra ${item.writingInstruction}`;
                }
                latexContent += `    \\item ${gabaritoInfo}\n`;
            });
            
            latexContent += `
\\end{enumerate}

\\end{document}
`;
            return latexContent;
        }

        document.getElementById('generatePDFBtn')?.addEventListener('click', async () => {
             const latex = generateLatex();
             if (latex) {
                // Notifica que o arquivo .tex será criado para visualização PDF
                showFeedback("Arquivo LaTeX gerado no console. O modelo irá criar o arquivo 'atividade_avaliacao.tex' para que você possa visualizá-lo como PDF.", "success");
             }
        });


        // --- Salvar Online (Firestore) ---

        document.getElementById('saveOnlineBtn')?.addEventListener('click', async (e) => {
            e.preventDefault();
            if (!isAuthReady || !userId) {
                return showFeedback("Aguarde a autenticação...", "error");
            }
            
            if (currentItems.length === 0) {
                return showFeedback("Adicione pelo menos uma questão à atividade.", "error");
            }

            const salvarBtn = document.getElementById('saveOnlineBtn');
            salvarBtn.disabled = true;
            salvarBtn.textContent = 'Salvando...';

            const now = new Date();
            const activityName = `Atividade Criada em ${now.toLocaleDateString('pt-BR')} às ${now.toLocaleTimeString('pt-BR')}`;

            const newActivity = {
                professorId: userId,
                nome: activityName,
                dataCriacao: now.toISOString(),
                questions: currentItems,
                submissions: 0 // Novo campo para rastrear envios
            };

            try {
                // Caminho: /artifacts/{appId}/public/data/activities
                const activityCollectionRef = collection(db, `artifacts/${appId}/public/data/activities`);
                await addDoc(activityCollectionRef, newActivity);

                showFeedback("Atividade salva online com sucesso!");
                
                // Limpa o formulário após salvar
                currentItems = [];
                renderCurrentItems();
                document.getElementById('questionType').value = 'multiple_choice';
                document.getElementById('questionType').dispatchEvent(new Event('change'));

            } catch (error) {
                console.error("Erro ao salvar atividade:", error);
                showFeedback("Erro ao salvar a atividade. Tente novamente.", "error");
            } finally {
                salvarBtn.disabled = false;
                salvarBtn.textContent = 'Salvar Online (Para Alunos Digitais)';
            }
        });

        // --- Renderização e Monitoramento de Atividades Salvas ---

        function setupRealtimeListeners() {
            if (!isAuthReady || !userId) return;

            const activityCollectionRef = collection(db, `artifacts/${appId}/public/data/activities`);
            const q = query(activityCollectionRef, where("professorId", "==", userId));

	            onSnapshot(q, (snapshot) => {
	                activities = [];
	                snapshot.forEach(doc => {
	                    const activity = { id: doc.id, ...doc.data() };
	                    
	                    // Adiciona dados de submissão simulados para demonstração
	                    // Em um sistema real, essa informação viria do Firestore também
	                    if (activity.nome.includes('Simulada')) {
	                        activity.submissions = {
	                            'aluno_prof1@escola.com': { status: 'pendente', resposta: 'A resposta para a questão aberta é a letra A e a afirmação é Certa.' },
	                            'aluno_prof2@escola.com': { status: 'corrigido', resposta: 'A resposta para a questão aberta é a letra B e a afirmação é Errada.', nota: 8.5 }
	                        };
	                    } else if (activity.nome.includes('Teste')) {
	                         activity.submissions = {
	                            'aluno_prof1@escola.com': { status: 'pendente', resposta: 'A resposta para a questão aberta é a letra C.' }
	                        };
	                    }
	                    
	                    activities.push(activity);
	                });
	                renderSavedActivities();
	            }, (error) => {
	                console.error("Erro ao obter atividades:", error);
	                showFeedback("Erro ao carregar atividades salvas.", "error");
	            });
	        }

        // --- Funções de Gerenciamento de Alunos ---
        
        // Simulação de dados de alunos (em um sistema real, viria do Firestore)
        let alunosData = {}; 
        const alunosTableBody = document.getElementById('alunosTableBody');
        const searchBarAluno = document.getElementById('searchBarAluno');
        const cadastroAlunoForm = document.getElementById('cadastroAlunoForm');
        const cadastroAlunoMessage = document.getElementById('cadastroAlunoMessage');

        /** Renderiza a tabela de alunos */
        function renderAlunosTable(data = alunosData) {
            if (!alunosTableBody) return;
            alunosTableBody.innerHTML = '';
            
            const sortedEmails = Object.keys(data).sort((a, b) => a.localeCompare(b));
            
            sortedEmails.forEach(email => {
                const aluno = data[email];
                
                const row = alunosTableBody.insertRow();
                row.className = 'hover:bg-gray-50 transition duration-150';
                row.setAttribute('data-email', email); // Para filtragem

                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${email}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${aluno.turma}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium flex flex-wrap gap-2">
                        <!-- Botão de Troca de Senha (Simulado - em um sistema real, chamaria API) -->
                        <button onclick="handleResetPasswordAluno('${email}')" 
                                class="action-button bg-yellow-400 hover:bg-yellow-500 text-gray-800 text-xs shadow-md">
                            Trocar Senha
                        </button>
                        <!-- Botão de Exclusão -->
                        <button onclick="handleExcluirAluno('${email}')" 
                                class="action-button bg-red-500 hover:bg-red-600 text-white text-xs shadow-md">
                            Excluir
                        </button>
                    </td>
                `;
            });
        }
        
        /** Função de Troca de Senha para Aluno */
        async function handleResetPasswordAluno(email) {
            const novaSenha = prompt(`Digite a NOVA senha para o aluno ${email}:`);

            if (!novaSenha) {
                showFeedback("Troca de senha cancelada ou senha vazia.", "error");
                return;
            }
            if (novaSenha.length < 6) {
                 showFeedback("A senha deve ter pelo menos 6 caracteres.", "error");
                return;
            }

            // Chama a API do Flask para trocar a senha
            const result = await apiFetch('/api/trocar_senha_aluno', {
                email: email,
                nova_senha: novaSenha
            });

            if (result.success) {
                showFeedback(result.message, 'success');
            } else {
                showFeedback(result.message, 'error');
            }
        }
        
        /** Função de Exclusão de Aluno */
        async function handleExcluirAluno(email) {
            if (!confirm(`Tem certeza que deseja EXCLUIR permanentemente o aluno ${email}?`)) {
                return;
            }
            
            // Chama a API do Flask para excluir o aluno
            const result = await apiFetch('/api/excluir_aluno', { email: email });
            if (result.success) {
                // Remove do DB local e re-renderiza
                delete alunosData[email];
                renderAlunosTable(); 
                showFeedback(result.message, 'success');
            } else {
                showFeedback(result.message, 'error');
            }
        }

        /** Manipula o envio do formulário de Cadastro de Aluno */
        if(cadastroAlunoForm) {
            cadastroAlunoForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                const email = document.getElementById('email_aluno_cadastro').value.toLowerCase();
                const senha = document.getElementById('senha_aluno_cadastro').value;
                const turma = document.getElementById('turma_aluno_cadastro').value.trim();

                const cadastrarBtn = document.getElementById('cadastrarAlunoBtn');
                cadastrarBtn.disabled = true;
                cadastrarBtn.textContent = 'Cadastrando...';

                // Chama a API do Flask para cadastrar o aluno
                const result = await apiFetch('/api/cadastrar_aluno', { email: email, senha: senha, turma: turma });

                cadastrarBtn.disabled = false;
                cadastrarBtn.textContent = 'Cadastrar Aluno';

                cadastroAlunoMessage.classList.remove('hidden');
                
                if (result.success) {
                    // Adiciona o novo aluno aos dados locais e re-renderiza
                    alunosData[email] = result.aluno_info;
                    renderAlunosTable();
                    
                    cadastroAlunoMessage.className = 'mt-4 p-4 rounded-lg bg-green-100 border border-green-400 text-green-700';
                    
                    let messageHTML = `<p class="font-bold">${result.message}</p>`;

                    if (result.generated_password) {
                        messageHTML += `<p class="mt-2 flex flex-col sm:flex-row items-start sm:items-center justify-between">
                                            Senha Gerada: <span id="generated-password" class="font-mono text-lg font-bold">${result.generated_password}</span>
                                            <button onclick="copyTextToClipboard('${result.generated_password}')"
                                                    class="mt-2 sm:mt-0 ml-0 sm:ml-4 action-button bg-blue-500 hover:bg-blue-600 text-white text-xs shadow-md py-1 px-2">
                                                Copiar Senha
                                            </button>
                                        </p>`;
                    } else {
                        messageHTML += `<p class="mt-2">O aluno deve usar a senha que você forneceu: 
                                            <span class="font-mono text-lg font-bold">${senha}</span>
                                            <button onclick="copyTextToClipboard('${senha}')"
                                                    class="ml-4 action-button bg-blue-500 hover:bg-blue-600 text-white text-xs shadow-md py-1 px-2">
                                                Copiar Senha
                                            </button>
                                        </p>`;
                    }
                    cadastroAlunoMessage.innerHTML = messageHTML;

                    // Limpa o formulário
                    document.getElementById('email_aluno_cadastro').value = '';
                    document.getElementById('senha_aluno_cadastro').value = '';
                    document.getElementById('turma_aluno_cadastro').value = '';

                } else {
                    cadastroAlunoMessage.className = 'mt-4 p-4 rounded-lg bg-red-100 border border-red-400 text-red-700';
                    cadastroAlunoMessage.innerHTML = `<p class="font-bold">Erro no Cadastro:</p><p>${result.message}</p>`;
                }
            });
        }

        /** Função de Filtragem da Tabela de Alunos */
        function filterTableAlunos() {
            if (!searchBarAluno || !alunosTableBody) return;
            const filter = searchBarAluno.value.toLowerCase();
            const rows = alunosTableBody.querySelectorAll('tr');
            
            rows.forEach(row => {
                const email = row.getAttribute('data-email').toLowerCase();
                if (email.includes(filter)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }
        
        // --- Funções de Geração de PDF ---
        
        const gerarPdfBtn = document.getElementById('gerarPdfBtn');
        if (gerarPdfBtn) {
            gerarPdfBtn.addEventListener('click', async () => {
                
                if (currentItems.length === 0) {
                    showFeedback("Adicione pelo menos uma questão na Seção 1 antes de gerar o PDF.", "error");
                    return;
                }
                
                // Pede informações adicionais para o PDF
                const titulo = prompt("Digite o Título da Atividade:", "Nova Atividade");
                if (!titulo) return;
                
                const turma = prompt("Digite a Turma/Série:", "5º Ano");
                if (!turma) return;
                
                const instrucoes = prompt("Digite as Instruções para a Atividade:", "Leia atentamente e responda no espaço indicado.");
                if (!instrucoes) return;
                
                // Formata as questões para o formato esperado pela API do Flask
                const perguntasFormatadas = currentItems.map(item => {
                    // Simplifica Certo/Errado e Problema Aberto para 'dissertativa' no PDF para o layout
                    const tipo = (item.type === 'true_false' || item.type === 'open_response') ? 'dissertativa' : item.type; 
                    
                    const base = {
                        tipo: tipo,
                        texto: item.text
                    };
                    if (item.type === 'multiple_choice') {
                        base.opcoes = item.options.map(opt => opt.text);
                    }
                    return base;
                });
                
                const atividadeData = {
                    titulo: titulo,
                    turma: turma,
                    instrucoes: instrucoes,
                    perguntas: perguntasFormatadas
                };
                
                const btn = document.getElementById('gerarPdfBtn');
                const originalText = btn.textContent;
                btn.disabled = true;
                btn.textContent = 'Gerando PDF... Aguarde.';
                
                try {
                    // Chama a API do Flask
                    const response = await apiFetch('/api/gerar_pdf_atividade', atividadeData);
                    
                    if (response.ok) {
                        const blob = await response.blob();
                        const url = window.URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.style.display = 'none';
                        a.href = url;
                        a.download = `${titulo.replace(/ /g, '_')}_${turma}_Atividade.pdf`;
                        document.body.appendChild(a);
                        a.click();
                        window.URL.revokeObjectURL(url);
                        showFeedback("PDF gerado com sucesso! O download deve ter iniciado.", 'success');
                    } else {
                        const errorText = await response.text();
                        showFeedback(`Erro ao gerar PDF: ${errorText}`, 'error');
                    }
                } catch (error) {
                    showFeedback(`Erro de conexão: ${error.message}`, 'error');
                } finally {
                    btn.disabled = false;
                    btn.textContent = originalText;
                }
            });
        }

        function renderSavedActivities() {
            if (!atividadesList) return;

            atividadesList.innerHTML = '';
            if (activities.length === 0) {
                atividadesList.innerHTML = '<p class="text-gray-500 text-center">Nenhuma atividade criada online ainda.</p>';
                return;
            }

            activities.forEach(activity => {
                const mcCount = activity.questions.filter(q => q.type === 'multiple_choice').length;
                const tfCount = activity.questions.filter(q => q.type === 'true_false').length;
                const openCount = activity.questions.filter(q => q.type === 'open_response').length;
                
                const hasGabarito = activity.questions.some(q => q.gabarito);
                const gabaritoInfo = hasGabarito ? 
                                     '<span class="text-green-600 font-semibold"> (Com Gabarito)</span>' : 
                                     '<span class="text-red-500 font-semibold"> (Sem Gabarito)</span>';
                
                const creationDate = new Date(activity.dataCriacao).toLocaleString('pt-BR');

	                const submissionsCount = activity.submissions ? Object.keys(activity.submissions).length : 0;
	                const correctedCount = activity.submissions ? Object.values(activity.submissions).filter(s => s.status === 'corrigido').length : 0;
	                const pendingCount = submissionsCount - correctedCount;
	                
	                const itemEl = document.createElement('li');
	                itemEl.className = 'card mb-4 flex flex-col md:flex-row justify-between items-start md:items-center';
	                itemEl.innerHTML = `
	                    <div class="mb-2 md:mb-0 flex-1">
	                        <p class="text-xl font-semibold text-blue-600">${activity.nome} ${gabaritoInfo}</p>
	                        <p class="text-sm text-gray-500 mb-2">
	                            ${mcCount} Múltipla Escolha | ${tfCount} C/E | ${openCount} Escrita | Criada em: ${creationDate}
	                        </p>
	                        <div class="flex space-x-4 text-sm font-medium">
	                            <span class="text-gray-700">Total: ${submissionsCount}</span>
	                            <span class="text-green-600">Corrigidas: ${correctedCount}</span>
	                            <span class="text-red-600">Pendentes: ${pendingCount}</span>
	                        </div>
	                    </div>
	                    <div class="flex space-x-2 w-full md:w-auto mt-2 md:mt-0">
	                        <button data-id="${activity.id}" 
	                                data-nome="${activity.nome}"
	                                class="corrigir-activity action-button bg-purple-500 hover:bg-purple-600 text-white text-sm px-3 py-1 flex-1 ${pendingCount === 0 ? 'disabled:opacity-50' : ''}" 
	                                ${pendingCount === 0 ? 'disabled' : ''}>
	                            Corrigir (${pendingCount})
	                        </button>
	                        <button data-id="${activity.id}" class="delete-activity action-button bg-red-500 hover:bg-red-600 text-white text-sm px-3 py-1 flex-1">
	                            Excluir
	                        </button>
	                    </div>
	                `;
	                atividadesList.appendChild(itemEl);
            });
            
	        /** Função de Correção de Atividade */
	        function handleCorrigirAtividade(activityId, activityName) {
	            const activity = activities.find(a => a.id === activityId);
	            if (!activity || !activity.submissions) {
	                showFeedback("Atividade ou submissões não encontradas.", "error");
	                return;
	            }
	            
	            const pendingSubmissions = Object.entries(activity.submissions)
	                .filter(([email, sub]) => sub.status === 'pendente');
	            
	            if (pendingSubmissions.length === 0) {
	                showFeedback("Nenhuma submissão pendente para correção.", "info");
	                return;
	            }
	            
	            // Simulação de correção: Pega a primeira submissão pendente
	            const [alunoEmail, submission] = pendingSubmissions[0];
	            
	            let correctionPrompt = `Corrigindo a atividade "${activityName}" do aluno ${alunoEmail}.\n\n`;
	            correctionPrompt += `Resposta do Aluno (Questão Aberta/C/E): "${submission.resposta}"\n\n`;
	            correctionPrompt += "Digite a NOTA (0 a 10) para esta submissão. Digite 'cancelar' para ignorar.";
	            
	            const notaStr = prompt(correctionPrompt);
	            
	            if (notaStr === null || notaStr.toLowerCase() === 'cancelar') {
	                showFeedback("Correção cancelada.", "info");
	                return;
	            }
	            
	            const nota = parseFloat(notaStr.replace(',', '.'));
	            
	            if (isNaN(nota) || nota < 0 || nota > 10) {
	                showFeedback("Nota inválida. Por favor, digite um número entre 0 e 10.", "error");
	                return;
	            }
	            
	            // Simula a atualização do status da submissão
	            activity.submissions[alunoEmail].status = 'corrigido';
	            activity.submissions[alunoEmail].nota = nota;
	            
	            // Simula o salvamento no Firestore (em um sistema real, seria uma chamada assíncrona)
	            // updateDoc(doc(db, `submissions/${activityId}/alunos`, alunoEmail), { status: 'corrigido', nota: nota });
	            
	            showFeedback(`Submissão de ${alunoEmail} corrigida com nota ${nota.toFixed(1)}.`, "success");
	            
	            // Re-renderiza a lista de atividades para atualizar as contagens
	            renderSavedActivities();
	        }
	        
	        // --- Funções de Geração de PDF ---
	
	            atividadesList.querySelectorAll('.corrigir-activity').forEach(button => {
	                button.onclick = async function() {
	                    const activityId = this.dataset.id;
	                    const activityName = this.dataset.nome;
	                    handleCorrigirAtividade(activityId, activityName);
	                };
	            });
	            
	            atividadesList.querySelectorAll('.delete-activity').forEach(button => {
	                button.onclick = async function() {
                    const activityId = this.dataset.id;
                    
                    // Substituindo window.prompt por um prompt simples no console e feedback
                    console.log(`Tentativa de exclusão da atividade ID: ${activityId}.`);
                    showFeedback("Para excluir, você precisará confirmar a exclusão com o comando no console.", "error");

                    // Simulação de confirmação:
                    const isConfirmed = confirm('Tem certeza que deseja EXCLUIR esta atividade permanentemente? Clique em OK para confirmar.');

                    if (isConfirmed) {
                        try {
                            const docRef = doc(db, `artifacts/${appId}/public/data/activities`, activityId);
                            await deleteDoc(docRef);
                            showFeedback("Atividade excluída com sucesso.", "success"); // Mudado para success pois a ação foi concluída
                        } catch(e) {
                            console.error("Erro ao excluir:", e);
                            showFeedback("Erro ao excluir atividade. Verifique as permissões.", "error");
                        }
                    } else {
                        showFeedback("Exclusão cancelada.", "error");
                    }
                };
            });
        }
    </script>
</head>
<body class="p-4 md:p-8">

    <!-- Mensagem de Feedback (Toast) -->
    <div id="feedback-message" style="display:none;"></div>

    <header class="flex justify-between items-center mb-8 border-b pb-4">
        <h1 class="text-3xl font-bold text-gray-800">Dashboard do Professor</h1>
        <p id="userIdDisplay" class="text-xs text-gray-500 bg-gray-100 p-2 rounded-lg truncate">Aguardando autenticação...</p>
        <a href="{{ url_for('simulador_atividade') }}" target="_blank" class="action-button bg-blue-500 hover:bg-blue-600 text-white shadow-md mr-2">
            Simulador de Atividade
        </a>
        <a href="{{ url_for('logout_login') }}" class="action-button bg-red-500 hover:bg-red-600 text-white shadow-md">
            Sair
        </a>
    </header>
    
    <!-- Indicador de Carregamento -->
    <div id="loadingIndicator" class="text-center p-8 text-xl font-semibold text-blue-500">
        Carregando painel e dados...
    </div>

    <!-- Conteúdo Principal do Dashboard (Escondido até carregar) -->
    <div id="dashboardContainer" class="dashboard-content hidden">
        <!-- Seção 1: Criação de Nova Atividade -->
        <section class="card mb-8">
            <h2 class="text-2xl font-semibold text-blue-600 mb-4 border-b pb-2">1. Criar e Gerar Questões</h2>
            
            <div class="space-y-6">
                <!-- SELETOR DE TIPO DE QUESTÃO -->
                <div class="border p-4 rounded-xl bg-gray-50">
                    <h3 class="text-lg font-medium mb-3 text-gray-700">Adicionar Nova Questão</h3>
                    <label for="questionType" class="block text-sm font-medium text-gray-700 mb-2">Selecione o Tipo:</label>
                    <select id="questionType" class="p-3 border border-gray-300 rounded-lg shadow-sm w-full md:w-1/3">
                        <option value="multiple_choice">Múltipla Escolha (Com Gabarito)</option>
                        <option value="true_false">Certo ou Errado (Sem/Com Gabarito)</option>
                        <option value="open_response">Problema Aberto (Escrita)</option>
                    </select>
                    
                    <!-- CAMPOS DINÂMICOS -->
                    
                    <!-- MÚLTIPLA ESCOLHA -->
                    <div id="multipleChoiceFields" class="mt-4 p-3 bg-blue-50 rounded-lg">
                        <textarea id="mcQuestionInput" rows="2" class="mt-1 block w-full p-2 border border-blue-300 rounded-lg shadow-sm" placeholder="Enunciado da questão de Múltipla Escolha"></textarea>
                        
                        <div class="grid grid-cols-2 gap-2 mt-3">
                            <input type="text" id="mcOptionA" placeholder="Opção A" class="p-2 border rounded-lg">
                            <input type="text" id="mcOptionB" placeholder="Opção B" class="p-2 border rounded-lg">
                            <input type="text" id="mcOptionC" placeholder="Opção C" class="p-2 border rounded-lg">
                            <input type="text" id="mcOptionD" placeholder="Opção D" class="p-2 border rounded-lg">
                        </div>
                        
                        <label for="mcGabarito" class="mt-3 block text-sm font-medium text-gray-700">Gabarito:</label>
                        <select id="mcGabarito" class="p-2 border rounded-lg w-full">
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                        </select>
                    </div>
                    
                    <!-- CERTO OU ERRADO -->
                    <div id="trueFalseFields" class="mt-4 p-3 bg-gray-100 rounded-lg hidden-fields">
                        <textarea id="tfQuestionInput" rows="2" class="mt-1 block w-full p-2 border border-gray-300 rounded-lg shadow-sm" placeholder="Afirmação (Ex: O sol gira em torno da Terra)"></textarea>
                        
                        <label for="tfGabarito" class="mt-3 block text-sm font-medium text-gray-700">Gabarito (Opcional):</label>
                        <select id="tfGabarito" class="p-2 border rounded-lg w-full">
                            <option value="">Sem Gabarito</option>
                            <option value="C">Certo (C)</option>
                            <option value="E">Errado (E)</option>
                        </select>
                    </div>

                    <!-- PROBLEMA ABERTO (ESCRITA) -->
                    <div id="openResponseFields" class="mt-4 p-3 bg-yellow-50 rounded-lg hidden-fields">
                        <textarea id="openQuestionInput" rows="2" class="mt-1 block w-full p-2 border border-yellow-300 rounded-lg shadow-sm" placeholder="Enunciado do Problema Aberto"></textarea>
                        
                        <label for="openWritingInstruction" class="mt-3 block text-sm font-medium text-gray-700">Instrução de Escrita:</label>
                        <select id="openWritingInstruction" class="p-2 border rounded-lg w-full">
                            <option value="cursiva">Letra Cursiva</option>
                            <option value="forma">Letra de Forma</option>
                            <option value="nenhuma">Nenhuma (Resposta Curta)</option>
                        </select>
                    </div>

                    <button type="button" id="addItemBtn" class="action-button bg-blue-500 hover:bg-blue-600 text-white w-full p-3 text-lg font-semibold mt-4">
                        Adicionar Questão
                    </button>
                </div>


                <!-- Lista de Itens Adicionados -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Resumo das Questões na Atividade</label>
                    <div id="listaItensContainer" class="item-list-container">
                        <p class="text-gray-400 text-center italic">Nenhuma questão adicionada.</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <button type="button" id="generatePDFBtn" class="action-button bg-purple-600 hover:bg-purple-700 text-white w-full p-3 text-lg font-semibold">
                        Gerar PDF da Atividade (Formato Imprimível)
                    </button>
                     <button type="button" id="saveOnlineBtn" class="action-button bg-green-500 hover:bg-green-600 text-white w-full p-3 text-lg font-semibold">
                        Salvar Online (Para Alunos Digitais)
                    </button>
                </div>
                
            </div>
        </section>

        <!-- Seção 2: Atividades Salvas e Ações -->
        <section class="card mb-8">
            <h2 class="text-2xl font-semibold text-blue-600 mb-4 border-b pb-2">2. Gerenciar Atividades Salvas Online</h2>
            
            <ul id="atividadesList" class="divide-y divide-gray-200">
                <p class="text-gray-500 text-center">Carregando atividades...</p>
            </ul>
        </section>

            <!-- Botão de Geração de PDF de Atividade (Novo) -->
            <section class="card mb-8">
                <h2 class="text-2xl font-semibold text-blue-600 mb-4 border-b pb-2">3. Gerar PDF de Atividade (Questões Criadas)</h2>
                <p class="mb-4">Use este recurso para criar uma versão em PDF da **atividade atualmente montada** na Seção 1 (com as questões adicionadas) para impressão ou distribuição offline.</p>
                <button id="gerarPdfBtn" class="action-button bg-green-500 hover:bg-green-600 text-white w-full">
                    Criar PDF da Atividade Montada
                </button>
            </section>

            <!-- Gerenciamento de Alunos (Novo) -->
            <section class="card mb-8">
                <h2 class="text-2xl font-semibold text-blue-600 mb-4 border-b pb-2">4. Gerenciar Meus Alunos</h2>
                
                <!-- Cadastro de Novo Aluno -->
                <div class="mb-8 p-4 border rounded-lg bg-gray-50">
                    <h3 class="text-xl font-medium text-gray-700 mb-3">Cadastrar Novo Aluno</h3>
                    <form id="cadastroAlunoForm" class="space-y-4">
                        <div>
                            <label for="email_aluno_cadastro" class="block text-sm font-medium text-gray-700">E-mail do Aluno</label>
                            <input type="email" id="email_aluno_cadastro" required 
                                   class="mt-1 block w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500" 
                                   placeholder="novo.aluno@escola.com">
                        </div>
                        <div>
                            <label for="senha_aluno_cadastro" class="block text-sm font-medium text-gray-700">Senha (Opcional - será gerada se vazio)</label>
                            <input type="text" id="senha_aluno_cadastro" 
                                   class="mt-1 block w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500" 
                                   placeholder="Deixe vazio para senha automática">
                        </div>
                        <div>
                            <label for="turma_aluno_cadastro" class="block text-sm font-medium text-gray-700">Turma</label>
                            <input type="text" id="turma_aluno_cadastro" required
                                   class="mt-1 block w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500" 
                                   placeholder="Ex: 5A">
                        </div>
                        <button type="submit" id="cadastrarAlunoBtn" class="action-button bg-purple-500 hover:bg-purple-600 text-white w-full">
                            Cadastrar Aluno
                        </button>
                    </form>
                    <div id="cadastroAlunoMessage" class="mt-4 p-4 rounded-lg hidden"></div>
                </div>

                <!-- Tabela de Alunos -->
                <h3 class="text-xl font-medium text-gray-700 mb-3">Lista de Alunos</h3>
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-4 border-b pb-2">
                    <input type="text" id="searchBarAluno" onkeyup="filterTableAlunos()" placeholder="Pesquisar Aluno por email..." 
                           class="p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 w-full md:max-w-xs">
                </div>

                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">E-mail</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Turma</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="alunosTableBody" class="bg-white divide-y divide-gray-200">
                            <!-- Conteúdo preenchido via JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Botão de Geração de PDF de Atividade (Novo) -->
            <section class="card mb-8">
                <h2 class="text-2xl font-semibold text-blue-600 mb-4 border-b pb-2">3. Gerar PDF de Atividade (Questões Criadas)</h2>
                <p class="mb-4">Use este recurso para criar uma versão em PDF da **atividade atualmente montada** na Seção 1 (com as questões adicionadas) para impressão ou distribuição offline.</p>
                <button id="gerarPdfBtn" class="action-button bg-green-500 hover:bg-green-600 text-white w-full">
                    Criar PDF da Atividade Montada
                </button>
            </section>

            <!-- Gerenciamento de Alunos (Novo) -->
            <section class="card mb-8">
                <h2 class="text-2xl font-semibold text-blue-600 mb-4 border-b pb-2">4. Gerenciar Meus Alunos</h2>
                
                <!-- Cadastro de Novo Aluno -->
                <div class="mb-8 p-4 border rounded-lg bg-gray-50">
                    <h3 class="text-xl font-medium text-gray-700 mb-3">Cadastrar Novo Aluno</h3>
                    <form id="cadastroAlunoForm" class="space-y-4">
                        <div>
                            <label for="email_aluno_cadastro" class="block text-sm font-medium text-gray-700">E-mail do Aluno</label>
                            <input type="email" id="email_aluno_cadastro" required 
                                   class="mt-1 block w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500" 
                                   placeholder="novo.aluno@escola.com">
                        </div>
                        <div>
                            <label for="senha_aluno_cadastro" class="block text-sm font-medium text-gray-700">Senha (Opcional - será gerada se vazio)</label>
                            <input type="text" id="senha_aluno_cadastro" 
                                   class="mt-1 block w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500" 
                                   placeholder="Deixe vazio para senha automática">
                        </div>
                        <div>
                            <label for="turma_aluno_cadastro" class="block text-sm font-medium text-gray-700">Turma</label>
                            <input type="text" id="turma_aluno_cadastro" required
                                   class="mt-1 block w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500" 
                                   placeholder="Ex: 5A">
                        </div>
                        <button type="submit" id="cadastrarAlunoBtn" class="action-button bg-purple-500 hover:bg-purple-600 text-white w-full">
                            Cadastrar Aluno
                        </button>
                    </form>
                    <div id="cadastroAlunoMessage" class="mt-4 p-4 rounded-lg hidden"></div>
                </div>

                <!-- Tabela de Alunos -->
                <h3 class="text-xl font-medium text-gray-700 mb-3">Lista de Alunos</h3>
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-4 border-b pb-2">
                    <input type="text" id="searchBarAluno" onkeyup="filterTableAlunos()" placeholder="Pesquisar Aluno por email..." 
                           class="p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 w-full md:max-w-xs">
                </div>

                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">E-mail</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Turma</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="alunosTableBody" class="bg-white divide-y divide-gray-200">
                            <!-- Conteúdo preenchido via JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>
	    </div>
	
	</body>
</html>
